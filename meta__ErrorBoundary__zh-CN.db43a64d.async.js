"use strict";(self.webpackChunk_ant_design_pro_editor=self.webpackChunk_ant_design_pro_editor||[]).push([[853],{8388:function(u,r,n){n.r(r),n.d(r,{demos:function(){return h}});var l=n(90228),d=n.n(l),T=n(87999),O=n.n(T),_=n(75271),h={"errorboundary-demo-_prod":{component:_.memo(_.lazy(function(){return n.e(2781).then(n.bind(n,15875))})),asset:{type:"BLOCK",id:"errorboundary-demo-_prod",refAtomIds:["ErrorBoundary"],dependencies:{"index.tsx":{type:"FILE",value:n(28346).Z},antd:{type:"NPM",value:"5.12.8"},react:{type:"NPM",value:"18.3.1"},"...tsx":{type:"FILE",value:n(3136).Z},"react-layout-kit":{type:"NPM",value:"1.9.0"}},entry:"index.tsx",title:"\u751F\u4EA7\u73AF\u5883"},context:{antd:n(34745),react:n(75271),"...tsx":n(74481),"react-layout-kit":n(6020)},renderOpts:{compile:function(){var x=O()(d()().mark(function f(){var s,D=arguments;return d()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,n.e(8865).then(n.bind(n,58865));case 2:return o.abrupt("return",(s=o.sent).default.apply(s,D));case 3:case"end":return o.stop()}},f)}));function y(){return x.apply(this,arguments)}return y}()}},"errorboundary-demo-_dev":{component:_.memo(_.lazy(function(){return n.e(2781).then(n.bind(n,44997))})),asset:{type:"BLOCK",id:"errorboundary-demo-_dev",refAtomIds:["ErrorBoundary"],dependencies:{"index.tsx":{type:"FILE",value:n(18413).Z},react:{type:"NPM",value:"18.3.1"},antd:{type:"NPM",value:"5.12.8"},"../index.tsx":{type:"FILE",value:n(3136).Z},"react-layout-kit":{type:"NPM",value:"1.9.0"}},entry:"index.tsx",description:"\u5F00\u53D1\u65F6\u4F1A\u76F4\u63A5\u663E\u793A\u62A5\u9519\u4FE1\u606F",title:"\u5F00\u53D1\u73AF\u5883"},context:{react:n(75271),antd:n(34745),"../index.tsx":n(74481),"react-layout-kit":n(6020)},renderOpts:{compile:function(){var x=O()(d()().mark(function f(){var s,D=arguments;return d()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,n.e(8865).then(n.bind(n,58865));case 2:return o.abrupt("return",(s=o.sent).default.apply(s,D));case 3:case"end":return o.stop()}},f)}));function y(){return x.apply(this,arguments)}return y}()}}}},74481:function(u,r,n){n.r(r),n.d(r,{default:function(){return W}});var l=n(25298),d=n.n(l),T=n(17069),O=n.n(T),_=n(62657),h=n.n(_),x=n(21742),y=n.n(x),f=n(83136),s=n.n(f),D=n(82092),I=n.n(D),o=n(5402),F=n(4401),R=n(68084),A=n(57820),L=n(15258),K=n(82901),S=n(75271),C=n(90142),e=n(52676),U=o.Z.Title,B=o.Z.Text,W=function(Z){y()(P,Z);var b=s()(P);function P(){var t;d()(this,P);for(var i=arguments.length,p=new Array(i),m=0;m<i;m++)p[m]=arguments[m];return t=b.call.apply(b,[this].concat(p)),I()(h()(t),"state",{error:void 0,info:{componentStack:""}}),I()(h()(t),"errorInfo",function(){var a,g=t.state,c=g.error,v=g.info;return(0,e.jsxs)(C.D,{style:{width:800,background:"rgba(0,0,0,0.02)",padding:"24px 40px"},gap:12,children:[(0,e.jsx)("div",{children:(0,e.jsxs)(B,{children:["\u9519\u8BEF\u4FE1\u606F\uFF1A",c==null?void 0:c.toString()]})}),(0,e.jsx)(C.D,{children:(a=v==null?void 0:v.componentStack.split(`
`).map(function(E,M){return(0,e.jsx)("div",{style:{textAlign:"left",fontSize:10},children:(0,e.jsx)(B,{type:"secondary",children:E})},E+M)}))!==null&&a!==void 0?a:null})]})}),I()(h()(t),"prodInfo",function(){var a=t.props.onExportConfig;return(0,e.jsxs)(C.D,{align:"center",children:[(0,e.jsx)(F.Z,{image:(0,e.jsx)("div",{style:{fontSize:80,lineHeight:1},children:"\u{1F914}"}),description:(0,e.jsxs)(C.D,{gap:16,children:[(0,e.jsx)(U,{level:5,children:" \u7EC4\u4EF6\u6E32\u67D3\u4F3C\u4E4E\u51FA\u4E86\u70B9\u5C0F\u95EE\u9898 "}),(0,e.jsxs)("div",{children:[(0,e.jsx)(B,{type:"secondary",children:"\u4E0D\u8FC7\u522B\u62C5\u5FC3\uFF0C\u4F60\u7684\u6570\u636E\u90FD\u8FD8\u5728\uFF0C\u53EF\u4EE5\u5C1D\u8BD5\u5BFC\u51FA\u6570\u636E\u540E\u91CD\u8BD5"}),(0,e.jsx)("br",{}),(0,e.jsx)("div",{style:{marginTop:8},children:(0,e.jsx)(B,{type:"secondary",children:"\u5982\u91CD\u8BD5\u540E\u4ECD\u7136\u5B58\u5728\u95EE\u9898\uFF0C\u8BF7\u8054\u7CFB\u5BA2\u670D\u4EBA\u5458"})})]})]}),children:(0,e.jsx)("div",{children:(0,e.jsxs)(R.Z,{children:[(0,e.jsx)(A.ZP,{type:"primary",onClick:a,children:"\u5BFC\u51FA\u914D\u7F6E"}),(0,e.jsx)(A.ZP,{onClick:function(){L.ZP.success("\u5DF2\u63D0\u4EA4Bug")},children:"\u63D0\u4EA4Bug"})]})})}),(0,e.jsx)("div",{style:{marginTop:24},children:t.errorInfo()})]})}),t}return O()(P,[{key:"componentDidCatch",value:function(i,p){this.setState({error:i,info:p})}},{key:"render",value:function(){var i=this.props,p=i.children,m=i.onRetry,a=i.showDev,g=a===void 0?!1:a,c=this.state,v=c.error,E=c.info;if(v){var M;return(0,e.jsx)(C.D,{style:{padding:24},children:g?(0,e.jsx)(K.Z,{type:"error",message:v.toString(),showIcon:!0,description:(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{style:{overflow:"auto",maxHeight:"calc(100vh - 200px)"},children:(M=E==null?void 0:E.componentStack.split(`
`).map(function(j,z){return(0,e.jsx)("div",{style:{textAlign:"left",fontSize:10},children:(0,e.jsx)(B,{type:"secondary",children:j})},j+z)}))!==null&&M!==void 0?M:null}),(0,e.jsx)("div",{style:{marginTop:24},children:(0,e.jsx)(A.ZP,{type:"primary",onClick:m,children:"\u91CD\u8BD5"})})]})}):this.prodInfo()})}return(0,e.jsx)(e.Fragment,{children:p})}}]),P}(S.Component)},52451:function(u,r,n){n.r(r),n.d(r,{texts:function(){return l}});const l=[{value:"\u901A\u7528\u9519\u8BEF\u63D0\u793A\u9762\u677F",paraId:0,tocIndex:0},{value:"\u9519\u8BEF\u8FB9\u754C\u7EC4\u4EF6\u5C5E\u6027\u63A5\u53E3",paraId:1,tocIndex:4},{value:"\u5C5E\u6027\u540D",paraId:2,tocIndex:4},{value:"\u7C7B\u578B",paraId:2,tocIndex:4},{value:"\u63CF\u8FF0",paraId:2,tocIndex:4},{value:"children",paraId:2,tocIndex:4},{value:"React.ReactNode",paraId:2,tocIndex:4},{value:"\u5B50\u7EC4\u4EF6",paraId:2,tocIndex:4},{value:"onExportConfig",paraId:2,tocIndex:4},{value:"() => void",paraId:2,tocIndex:4},{value:"\u5BFC\u51FA\u914D\u7F6E\u9879\u56DE\u8C03\u51FD\u6570",paraId:2,tocIndex:4},{value:"onRetry",paraId:2,tocIndex:4},{value:"() => void",paraId:2,tocIndex:4},{value:"\u91CD\u8BD5\u56DE\u8C03\u51FD\u6570",paraId:2,tocIndex:4},{value:"showDev",paraId:2,tocIndex:4},{value:"boolean",paraId:2,tocIndex:4},{value:"\u662F\u5426\u663E\u793A\u5F00\u53D1\u8005\u9009\u9879",paraId:2,tocIndex:4}]},18413:function(u,r){r.Z=`import { useState } from 'react';
import ErrorBoundary from '../index';

import { Button } from 'antd';

const App = () => {
  const [showError, setError] = useState(true);
  const list = {};
  return (
    <div>
      {showError ? (
        // @ts-ignore
        list.map((i) => i)
      ) : (
        <Button
          onClick={() => {
            setError(true);
          }}
        >
          \u70B9\u51FB\u89E6\u53D1\u9519\u8BEF
        </Button>
      )}
    </div>
  );
};

export default () => (
  <ErrorBoundary showDev>
    <App />
  </ErrorBoundary>
);
`},28346:function(u,r){r.Z=`import { Button } from 'antd';
import { useState } from 'react';
import ErrorBoundary from '..';

const App = () => {
  const [showError, setError] = useState(true);
  const list = {};
  return (
    <div>
      {showError ? (
        // @ts-ignore
        list.map((i) => i)
      ) : (
        <Button
          onClick={() => {
            setError(true);
          }}
        >
          \u70B9\u51FB\u89E6\u53D1\u9519\u8BEF
        </Button>
      )}
    </div>
  );
};

export default () => (
  <ErrorBoundary showDev={false}>
    <App />
  </ErrorBoundary>
);
`},3136:function(u,r){r.Z=`/* eslint-disable react/no-array-index-key */
import { Alert, Button, Empty, Space, Typography, message } from 'antd';
import { Component } from 'react';
import { Flexbox } from 'react-layout-kit';

const { Title, Text } = Typography;

/******************************************************
 ************************* Dom *************************
 ******************************************************/

/**
 * \u9519\u8BEF\u8FB9\u754C\u7EC4\u4EF6\u5C5E\u6027\u63A5\u53E3
 */
interface ErrorBoundaryProps {
  /**
   * \u5B50\u7EC4\u4EF6
   */
  children?: React.ReactNode;

  /**
   * \u5BFC\u51FA\u914D\u7F6E\u9879\u56DE\u8C03\u51FD\u6570
   */
  onExportConfig?: () => void;

  /**
   * \u91CD\u8BD5\u56DE\u8C03\u51FD\u6570
   */
  onRetry?: () => void;

  /**
   * \u662F\u5426\u663E\u793A\u5F00\u53D1\u8005\u9009\u9879
   */
  showDev?: boolean;
}

interface State {
  error?: Error;
  info: {
    componentStack: string;
  };
}

export default class ErrorBoundary extends Component<ErrorBoundaryProps, State> {
  state: State = {
    error: undefined,
    info: {
      componentStack: '',
    },
  };

  componentDidCatch(error: any, info: any) {
    this.setState({ error, info });
  }

  errorInfo = () => {
    const { error, info } = this.state;
    return (
      <Flexbox
        style={{
          width: 800,
          background: 'rgba(0,0,0,0.02)',
          padding: '24px 40px',
        }}
        gap={12}
      >
        <div>
          <Text>
            \u9519\u8BEF\u4FE1\u606F\uFF1A
            {error?.toString()}
          </Text>
        </div>

        <Flexbox>
          {info?.componentStack.split('\\n').map((i, index) => (
            // eslint-disable-next-line react/no-array-index-key
            <div key={i + index} style={{ textAlign: 'left', fontSize: 10 }}>
              <Text type={'secondary'}>{i}</Text>
            </div>
          )) ?? null}
        </Flexbox>
      </Flexbox>
    );
  };

  prodInfo = () => {
    const { onExportConfig } = this.props;
    return (
      <Flexbox align={'center'}>
        <Empty
          image={<div style={{ fontSize: 80, lineHeight: 1 }}>\u{1F914}</div>}
          description={
            <Flexbox gap={16}>
              <Title level={5}> \u7EC4\u4EF6\u6E32\u67D3\u4F3C\u4E4E\u51FA\u4E86\u70B9\u5C0F\u95EE\u9898 </Title>
              <div>
                <Text type={'secondary'}>\u4E0D\u8FC7\u522B\u62C5\u5FC3\uFF0C\u4F60\u7684\u6570\u636E\u90FD\u8FD8\u5728\uFF0C\u53EF\u4EE5\u5C1D\u8BD5\u5BFC\u51FA\u6570\u636E\u540E\u91CD\u8BD5</Text>
                <br />
                <div style={{ marginTop: 8 }}>
                  <Text type={'secondary'}>\u5982\u91CD\u8BD5\u540E\u4ECD\u7136\u5B58\u5728\u95EE\u9898\uFF0C\u8BF7\u8054\u7CFB\u5BA2\u670D\u4EBA\u5458</Text>
                </div>
              </div>
            </Flexbox>
          }
        >
          <div>
            <Space>
              <Button type={'primary'} onClick={onExportConfig}>
                \u5BFC\u51FA\u914D\u7F6E
              </Button>
              <Button
                onClick={() => {
                  message.success('\u5DF2\u63D0\u4EA4Bug');
                }}
              >
                \u63D0\u4EA4Bug
              </Button>
            </Space>
          </div>
        </Empty>
        <div style={{ marginTop: 24 }}>{this.errorInfo()}</div>
      </Flexbox>
    );
  };

  render() {
    const {
      children,
      onRetry,
      // \u7528\u4E8E\u5F00\u53D1 ErrorBoundary
      // showDev = false,
      showDev = process.env.NODE_ENV === 'development',
    } = this.props;
    const { error, info } = this.state;
    if (error) {
      // You can render any custom fallback UI
      return (
        <Flexbox style={{ padding: 24 }}>
          {showDev ? (
            <Alert
              type="error"
              message={error.toString()}
              showIcon
              description={
                <div>
                  <div
                    style={{
                      overflow: 'auto',
                      maxHeight: 'calc(100vh - 200px)',
                    }}
                  >
                    {info?.componentStack.split('\\n').map((i, index) => (
                      <div key={i + index} style={{ textAlign: 'left', fontSize: 10 }}>
                        <Text type={'secondary'}>{i}</Text>
                      </div>
                    )) ?? null}
                  </div>
                  <div style={{ marginTop: 24 }}>
                    <Button type="primary" onClick={onRetry}>
                      \u91CD\u8BD5
                    </Button>
                  </div>
                </div>
              }
            />
          ) : (
            this.prodInfo()
          )}
        </Flexbox>
      );
    }

    return <>{children}</>;
  }
}
`},6020:function(u,r,n){n.r(r),n.d(r,{Center:function(){return l.Z},Flexbox:function(){return d.D}});var l=n(55471),d=n(90142)}}]);
